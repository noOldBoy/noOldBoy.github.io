---
title: 23ç§è®¾è®¡æ¨¡å¼
date: 2022-11-18 16:51:06
tags:
- è®¾è®¡æ¨¡å¼
categories:
- å…¶ä»–
cover: /images/background/17.jpeg
coverWidth: 1200
coverHeight: 320
---

è®¾è®¡æ¨¡å¼å­¦ä¹ 

<!-- more -->

### 23ç§è®¾è®¡æ¨¡å¼

#### åˆ›å»ºå‹æ¨¡å¼

##### 1. ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰

ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œæœ¬èº«çš„ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œé™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿å¾—ä¸¤ä¸ªä¿®æ”¹èµ·æ¥ç›¸å¯¹å®¹æ˜“äº›ï¼Œå½“ä»¥åå®ç°æ”¹å˜æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å·¥å‚ç±»å³å¯ã€‚åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå‘å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥åˆ›å»ºå¯¹è±¡ã€‚

```java
public class demo2 {
    
    public class User {
        public void getGoods() {
            Factory factory = new Factory();
            Mose mose = (Mose) factory.createEntity(EntityEnum.MOSE);
            KeyBoard keyboard = (KeyBoard) factory.createEntity(EntityEnum.KEYBOARD);
        }
    }

    public enum EntityEnum {
        MOSE,KEYBOARD
    }

    public class Factory {
        public Object createEntity (EntityEnum entityEnum) {
            if (EntityEnum.MOSE == entityEnum) {
                return new Mose();
            } else if (EntityEnum.KEYBOARD == entityEnum) {
                return new KeyBoard();
            }
            return null;
        }
    }

    public class Mose {
        public Mose() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé¼ æ ‡");
        }
    }

    public class KeyBoard {
        public KeyBoard() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé”®ç›˜");
        }
    }
    
}
```

###### **ä¼˜ç‚¹**

ç®€å•å·¥å‚æ¨¡å¼ä½¿ç”¨å·¥å‚ç±»æ¥ç»Ÿä¸€åˆ›å»ºå¯¹è±¡ï¼Œå®ç°äº†ä½¿ç”¨å’Œåˆ›å»ºçš„åˆ†ç¦»ã€‚åªéœ€çŸ¥é“å…·ä½“äº§å“ç±»æ‰€å¯¹åº”çš„å‚æ•°å³å¯ï¼Œé€šè¿‡å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»»ä½•å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢å’Œå¢åŠ æ–°çš„å…·ä½“äº§å“ç±»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚

###### **ç¼ºç‚¹**

 ä½†ç¼ºç‚¹åœ¨äºä¸ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ï¼Œæ¯æ¬¡æ·»åŠ æ–°äº§å“å°±éœ€è¦ä¿®æ”¹å·¥å‚ç±»ã€‚åœ¨äº§å“ç±»å‹è¾ƒå¤šæ—¶ï¼Œæœ‰å¯èƒ½é€ æˆå·¥å‚é€»è¾‘è¿‡äºå¤æ‚ï¼Œä¸åˆ©äºç³»ç»Ÿçš„æ‰©å±•ç»´æŠ¤ï¼Œå¹¶ä¸”å·¥å‚ç±»é›†ä¸­äº†æ‰€æœ‰äº§å“åˆ›å»ºé€»è¾‘ï¼Œä¸€æ—¦ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½è¦å—åˆ°å½±å“ã€‚

##### 2. å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰

å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯å°†å·¥å‚ç±»çš„åˆ›å»ºè¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼Œæ¯ä¸ªå…·ä½“çš„äº§å“ç±»éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å·¥å‚ç±»æ¥åˆ›å»ºå¯¹è±¡ã€‚å®¢æˆ·ç«¯ä»£ç åªéœ€è¦è°ƒç”¨ç›¸åº”çš„å·¥å‚ç±»æ¥åˆ›å»ºå¯¹è±¡å³å¯ã€‚

```java
public class demo3 {

    abstract class Product {
    }

    public class Mose extends Product {
        public Mose() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé¼ æ ‡");
        }
    }

    public class KeyBoard extends Product {
        public KeyBoard() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé”®ç›˜");
        }
    }

    interface FactoryProduct {
        Product creatProduct();
    }

    public class MoseFactory implements FactoryProduct {

        @Override
        public Mose creatProduct() {
            return new Mose();
        }
    }

    public class KeyBoardFactory implements FactoryProduct {

        @Override
        public KeyBoard creatProduct() {
            return new KeyBoard();
        }
    }

    void mian () {
        MoseFactory moseFactory = new MoseFactory();
        Mose mose = moseFactory.creatProduct();
        KeyBoardFactory keyBoardFactory = new KeyBoardFactory();
        KeyBoard keyBoard = keyBoardFactory.creatProduct();
    }

    public static void main(String[] args) {
        demo3 demo3 = new demo3();
        demo3.mian();
    }
}
```

###### **ä¼˜ç‚¹ï¼š**

å·¥å‚æ–¹æ³•æ¨¡å¼å°†å·¥å‚æŠ½è±¡åŒ–ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ã€‚æ¯æ¬¡å¢åŠ æ–°çš„äº§å“åªéœ€è¦å¢åŠ è¯¥äº§å“è·Ÿè¯¥äº§å“çš„å·¥å‚ç±»ç”±å…·ä½“å·¥å‚ç±»å†³å®šè¦å®ä¾‹åŒ–çš„äº§å“æ˜¯å“ªä¸ªï¼Œå°†å¯¹è±¡çš„åˆ›å»ºä¸å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ï¼Œè¿™æ ·å·¥å‚çš„è®¾è®¡å°±ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€äº†ï¼Œæ‰©å±•æ—¶ä¸å¿…å»ä¿®æ”¹åŸæ¥çš„ä»£ç ã€‚

###### **ç¼ºç‚¹ï¼š**

ä½†ç¼ºç‚¹åœ¨äºï¼Œæ¯å¢åŠ ä¸€ä¸ªäº§å“éƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»å’Œå®ç°å·¥å‚ç±»ï¼Œä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚

ç¼ºç‚¹ï¼š

##### 3. æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰

æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå°†å·¥å‚ç±»çš„æŠ½è±¡åŒ–ç¨‹åº¦å†æé«˜ä¸€å±‚ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼ç”¨äºåˆ›å»ºä¸€ç»„ç›¸å…³çš„å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºä¸€ç³»åˆ—çš„äº§å“ã€‚å®¢æˆ·ç«¯ä»£ç ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„äº§å“ç±»ï¼Œåªéœ€è¦çŸ¥é“æŠ½è±¡å·¥å‚å’ŒæŠ½è±¡äº§å“ç±»å³å¯ã€‚

```java
public class demo4 {

    /**
     * äº§å“æŠ½è±¡ç±»
     */
    abstract class Product {
    }

    /**
     * é¼ æ ‡æŠ½è±¡å®ç°ç±»
     */
    public class Mose extends Product {
        public Mose() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé¼ æ ‡");
        }
    }

    /**
     * é”®ç›˜æŠ½è±¡å®ç°ç±»
     */
    public class KeyBoard extends Product {
        public KeyBoard() {
            System.out.println("ç”Ÿäº§å‡ºä¸€ä¸ªé”®ç›˜");
        }
    }

    /**
     * ç»´ä¿®æŠ½è±¡ç±»
     */
    abstract class Maintain {
    }

    public class MaintainMose extends Maintain {
        public MaintainMose() {
            System.out.println("ç»´ä¿®ä¸€ä¸ªé¼ æ ‡");
        }
    }

    public class MaintainKeyBoard extends Maintain {
        public MaintainKeyBoard() {
            System.out.println("ç»´ä¿®ä¸€ä¸ªé”®ç›˜");
        }
    }

    /**
     * æŠ½è±¡å·¥å‚ç±»
     */
    abstract class AbstractFactory {
        public abstract Product createProduct();

        public abstract Maintain createMaintain();
    }


    public class MoseFactory extends AbstractFactory {
        @Override
        public Mose createProduct() {
            return new Mose();
        }

        @Override
        public MaintainMose createMaintain() {
            return new MaintainMose();
        }
    }

    public class KeyBoardFactory extends AbstractFactory {
        @Override
        public KeyBoard createProduct() {
            return new KeyBoard();
        }

        @Override
        public MaintainKeyBoard createMaintain() {
            return new MaintainKeyBoard();
        }
    }

    void mian() {
        MoseFactory moseFactory = new MoseFactory();
        moseFactory.createProduct();
        moseFactory.createMaintain();
        KeyBoardFactory keyBoardFactory = new KeyBoardFactory();
        keyBoardFactory.createProduct();
        keyBoardFactory.createMaintain();
    }

    public static void main(String[] args) {
        demo4 demo3 = new demo4();
        demo3.mian();
    }
}
```

###### **ç¼ºç‚¹ï¼š**

 ä½†è¯¥æ¨¡å¼çš„ç¼ºç‚¹åœ¨äºæ·»åŠ æ–°çš„è¡Œä¸ºæ—¶æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœéœ€è¦æ·»åŠ ä¸€ä¸ªæ–°äº§å“æ—å¯¹è±¡æ—¶ï¼Œéœ€è¦æ›´æ”¹æ¥å£åŠå…¶ä¸‹æ‰€æœ‰å­ç±»ï¼Œè¿™å¿…ç„¶ä¼šå¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ã€‚

##### 4. å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰

å•ä¾‹æ¨¡å¼æ˜¯æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä»¥ç¡®ä¿å®ƒæ‰€æœ‰çš„å®ä¾‹éƒ½è®¿é—®ç›¸åŒçš„çŠ¶æ€ã€‚

##### ç®€å•æ‡’æ±‰æ¨¡å¼

åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å»åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨staticä¿è¯åªä¼šå®ä¾‹åŒ–ä¸€æ¬¡

```java
public class Demo5 {

    private static Demo5 demo5 = null;

    public Demo5() {
    }

    private static Demo5 getDemo() {
        if (null == demo5) {
            demo5 = new Demo5();
        }
        return demo5;
    }

    public static void main(String[] args) {
        Demo5 demo = Demo5.getDemo();
    }
}
```

###### **ç¼ºç‚¹ï¼š**

æ‡’æ±‰å¼å•ä¾‹çš„å®ç°æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œåœ¨å¹¶å‘ç¯å¢ƒä¸‹å¯èƒ½å‡ºç°å¤šä¸ª Singleton å®ä¾‹çš„é—®é¢˜ã€‚è¦å®ç°çº¿ç¨‹å®‰å…¨ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼

###### æ–¹å¼ä¸€

åœ¨æ–¹æ³•è°ƒç”¨ä¸ŠåŠ äº†åŒæ­¥ï¼Œè™½ç„¶çº¿ç¨‹å®‰å…¨äº†ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦åŒæ­¥ï¼Œä¼šå½±å“æ€§èƒ½ï¼Œæ¯•ç«Ÿ99%çš„æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦åŒæ­¥çš„ã€‚

```java
private synchronized static Demo5 getDemo() {
    if (null == demo5) {
        demo5 = new Demo5();
    }
    return demo5;
}
```

###### æ–¹å¼äºŒ

åŒé‡æ£€æŸ¥é”å®š

```java
public class Demo6 {

    private volatile static Demo6 demo5 = null;

    public Demo6() {
    }

    private  static Demo6 getDemo() {
        if (null == demo5) {
            synchronized (Demo6.class){
                //åˆ¤æ–­ä¸¤æ¬¡ç©ºæ˜¯é¿å…ä¸¤ä¸ªçº¿ç¨‹éƒ½é€šè¿‡äº†ç¬¬ä¸€ä¸ª"null == demo5"æ ¡éªŒï¼Œä»è€Œåˆ›å»ºå¤šæ¬¡å¯¹è±¡
                if (null == demo5) {
                    demo5 = new Demo6();
                }
            }
        }
        return demo5;
    }
}
```

###### æ–¹å¼ä¸‰ï¼šé™æ€å†…éƒ¨ç±»

```
public class Demo7 {

    //é™æ€å†…éƒ¨ç±»åªä¼šåŠ è½½ä¸€æ¬¡
    public static class Demo7a {
        private static final Demo7 dmo = null;
    }

    private static Demo7 getDemo() {
        return Demo7a.dmo;
    }
}
```

##### ç®€å•é¥¿æ±‰æ¨¡å¼ 

é¥¿æ±‰å¼åœ¨ç±»åˆ›å»ºçš„åŒæ—¶å°±å·²ç»åˆ›å»ºå¥½ä¸€ä¸ªé™æ€çš„å¯¹è±¡ä¾›ç³»ç»Ÿä½¿ç”¨ï¼Œä»¥åä¸å†æ”¹å˜ï¼Œæ‰€ä»¥å¤©ç”Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚

```java
public class Demo8 {

    private  static Demo8 demo5 = new Demo8();

    private Demo8() {
    }

    private  static Demo8 getDemo() {
        return demo5;
    }
}
```

###### ç¼ºç‚¹

å› ä¸ºå£°æ˜çš„å¯¹è±¡æ˜¯æå‰åˆ›å»ºå¥½ï¼Œä¸”ç”³æ˜æ˜¯é™æ€çš„ï¼Œä¼šåœ¨ç±»åˆå§‹åŒ–æ—¶å€™åˆ›å»ºï¼Œåœ¨ç±»å¸è½½æ—¶å€™æ‰é‡Šæ”¾ï¼Œç”Ÿå‘½å‘¨æœŸè¿‡é•¿

#### 5. åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰

åŸå‹æ¨¡å¼æ˜¯æŒ‡åˆ›å»ºé‡å¤çš„å¯¹è±¡ï¼ŒåŒæ—¶åˆèƒ½ä¿è¯æ€§èƒ½ã€‚å®ƒé€šå¸¸éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡å¤åˆ¶è¯¥å¯¹è±¡æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

##### å¼•ç”¨æ‹·è´

å…¶å®å°±æ˜¯èµ‹å€¼

```java
Date date = new Date();
Date date2 = date;
```

##### æµ…æ‹·è´çš„å®ç°æ–¹å¼

æµ…æ‹·è´ä»…å¤åˆ¶å¯¹è±¡çš„**ç¬¬ä¸€å±‚**æ•°æ®ï¼Œå¯¹äºå¤šå±‚åµŒå¥—ç»“æ„çš„å¯¹è±¡ï¼Œæµ…æ‹·è´åçš„æ–°å¯¹è±¡ä¼šå’ŒåŸå¯¹è±¡**å…±äº«å¼•ç”¨**ã€‚è¿™æ„å‘³ç€å¦‚æœåµŒå¥—å±‚çº§ä¸­çš„å­å¯¹è±¡å‘ç”Ÿäº†æ”¹å˜ï¼Œæµ…æ‹·è´çš„å¯¹è±¡å’ŒåŸå¯¹è±¡éƒ½å°†å—å½±å“ã€‚

```java
@Data
@AllArgsConstructor
public class JeepCar implements Cloneable {

    private String mode;

    private LocalDateTime createDate;

    private double price;

    private Engine engine;

    @Override
    public JeepCar clone() {
        try {
            // TODO: copy mutable state here, so the clone can't change the internals of the original
            return (JeepCar) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}

@Data
@AllArgsConstructor
public class Engine {
    private String name;

    private int speed;
}

```

```java
 /**
     * è¿™é‡Œåªä¼šå¤åˆ¶äº†ç¬¬ä¸€å±‚å¯¹è±¡è·Ÿä»–çš„å¼•ç”¨
     * @param args
     */
    public static void main(String[] args) {
        Engine engine = new Engine("ä¸­å›½", 1500);
        JeepCar t300 = new JeepCar("T300", LocalDateTime.now(), 300000.999, engine);
        JeepCar clone1 = t300.clone();
        clone1.setMode("T500");
        engine.setName("æ—¥æœ¬");
        System.out.println(t300);
        System.out.println(clone1);
    }
```

##### æ·±æ‹·è´çš„å®ç°æ–¹å¼

###### æ‰‹åŠ¨æ‹·è´ï¼ˆéå¸¸éº»çƒ¦ä¸æ¨èï¼‰

å…¶å®å°±æ˜¯æ‰‹åŠ¨å»å¤„ç†å¼•ç”¨çš„æ•°æ®ç±»å‹ï¼Œæ³¨æ„çš„æ˜¯å¯¹äºä¸å¯å˜çš„ä¹Ÿå°±æ˜¯finalä¿®é¥°çš„ç±»ï¼ˆæ¯”å¦‚Stringç­‰ï¼‰éœ€è¦æ‰‹åŠ¨å»å¤„ç†

```java
@Data
@AllArgsConstructor
public class JeepCar1 implements Cloneable {

    private String mode;

    private LocalDateTime createDate;

    private double price;

    private Engine1 engine;

    @Override
    public JeepCar1 clone() {
        try {
            JeepCar1 clone = (JeepCar1) super.clone();
            clone.engine = this.engine.clone();
            return clone;
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}
public class Engine1 implements Cloneable {
    private String name;

    private int speed;

    @Override
    public Engine1 clone() {
        try {
            Engine1 clone = (Engine1) super.clone();
            // TODO: copy mutable state here, so the clone can't change the internals of the original
            return clone;
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}
```

###### åºåˆ—åŒ–æ‹·è´

éœ€è¦æ¯ä¸ªåº”ç”¨å¯¹è±¡éƒ½åºåˆ—åŒ–ï¼Œç›¸å¯¹æ¥è¯´åœ¨å¤§æ•°æ®é‡çš„æ—¶å€™æ¯”è¾ƒç®€å•

```java
@Data
@AllArgsConstructor
public class JeepCar2 implements Serializable {

    private String mode;

    private LocalDateTime createDate;

    private double price;

    private Engine2 engine;

    public JeepCar2 deepCopy() throws IOException, ClassNotFoundException {
        ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
        ObjectOutputStream out = new ObjectOutputStream(byteOut);
        out.writeObject(this);
        ByteArrayInputStream byteIn = new ByteArrayInputStream(byteOut.toByteArray());
        ObjectInputStream in = new ObjectInputStream(byteIn);
        return (JeepCar2) in.readObject();
    }

}

public class Engine2 implements Serializable {
    private String name;

    private int speed;
}

public class Test2 {

    public static void main(String[] args) throws IOException, ClassNotFoundException {
        Engine2 engine = new Engine2("ä¸­å›½", 1500);
        JeepCar2 t300 = new JeepCar2("T300", LocalDateTime.now(), 300000.999, engine);
        JeepCar2 jeepCar2 = t300.deepCopy();
        jeepCar2.setMode("T500");
        engine.setName("æ—¥æœ¬");
        System.out.println(t300);
        System.out.println(jeepCar2);
    }
}
```



### ç»“æ„å‹æ¨¡å¼

#### 6. é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç±»çš„æ¥å£ä¸å¦ä¸€ä¸ªæ¥å£ä¸å…¼å®¹çš„ç±»è¿›è¡Œåˆä½œã€‚é€‚é…å™¨æ¨¡å¼ä¸»è¦åˆ†æˆä¸‰ç±»ï¼šç±»çš„é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ã€æ¥å£çš„é€‚é…å™¨æ¨¡å¼ã€‚

**åœºæ™¯**

ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ï¼Œæˆ‘ä»¬åŠå…¬å¤§å¤šä½¿ç”¨ç¬”è®°æœ¬ï¼Œè¿™ä¸ªæ—¶å€™å¾ˆå¤šåŒäº‹éƒ½å–œæ¬¢æ¥ä¸€ä¸ªæ˜¾ç¤ºå™¨ï¼Œçœ‹èµ·æ¥æ›´å¤§æ›´èˆ’æœä¸€äº›ã€‚

ç°åœ¨å¾ˆå¤šè½»è–„æœ¬ä¸ºäº†å‡è½»é‡é‡ï¼Œåªé…å¤‡äº†typecæ¥å£.æ˜¾ç¤ºå™¨å¸¸ç”¨çš„æ¥å£æ˜¯hemlè·Ÿdpï¼Œä¸é€‚é…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ‰©å±•åæ¥ä½¿æ˜¾ç¤ºå™¨çš„æ¥å£æ¥å…¥ç¬”è®°æœ¬ã€‚   

æ˜¾ç¤ºå™¨ï¼ˆ**æºå¯¹è±¡**ï¼‰ -> æ‰©å±•åï¼ˆ**é€‚é…å™¨å¯¹è±¡**ï¼‰-> macBook(**ç›®æ ‡æ¥å£**)

```java
public interface DisplayHdml {

    public String hdml();
}

public class DisplayHdmlImpl implements DisplayHdml {

    public String hdml() {
        return "æ˜¾ç¤ºå™¨hdmlæ¥å£";
    }
}

public interface MacBook {
    String typec(String use);
}
public class MacBookImpl implements MacBook {
    @Override
    public String typec(String use) {
        return "æ¥å…¥mac typecæ¥å£ ç”¨äº" + use;
    }
}
```

##### ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼ˆä¸æ¨èï¼‰

ä¸ç®¡ä»€ä¹ˆæ‰©å±•åï¼Œè¾“å…¥ç«¯éƒ½è¦å»æ¥åˆ°ç¬”è®°æœ¬ã€‚ä¹Ÿå°±æ˜¯å…¶å®è¦æ¥å…¥ç¬”è®°æœ¬å…¶å®æ˜¯è¦æ¥å…¥æ‰©å±•åã€‚é‚£ä¹ˆæ‰©å±•åç»§æ‰¿macBookç±»è·å¾—typecæ¥å£çš„è¾“å…¥çš„èƒ½åŠ›ï¼Œä¸ºäº†å¯ä»¥ä½¿ç”¨hdmlæˆ‘ä»¬å†å®ç°æ‰©å±•åæ¥å£

```java
/**
 * ç±»çš„é€‚é…å™¨æ¨¡å¼
 */
public class DockingAdapterClass extends MacBookImpl implements DisplayHdml {
    @Override
    public String hdml() {
        return super.typec("æ˜¾ç¤ºå™¨");
    }
}

```

**æµ‹è¯•**

```java
public static void main(String[] args) {
    DisplayHdml displayHdml = new DockingAdapterClass();
    System.out.println(displayHdml.hdml());

    DisplayHdml displayHdml2 = new DockingAdapterObject();
    System.out.println(displayHdml2.hdml());
}
```

##### æ–¹æ³•çš„é€‚é…å™¨

javaä½œä¸ºå•ç»§æ‰¿çš„è¯­è¨€ï¼Œç»§æ‰¿æ–¹é¢æ‰©å±•æ€§è¾ƒå·®ã€‚å¦‚æœç±»å·²ç»ç»§æ‰¿äº†åˆ«çš„ç±»ï¼Œä¸‹é¢è¿™ç§æ–¹å¼æ‰©å±•æ€§æ›´é«˜

```java
/**
 * å¯¹è±¡é€‚é…
 */
public class DockingAdapterObject implements DisplayHdml {

    MacBook macBook = new MacBookImpl();

    @Override
    public String hdml() {
        return macBook.typec("æ˜¾ç¤ºå™¨");
    }
}
```

##### æ¥å£çš„é€‚é…å™¨æ¨¡å¼

æœ‰æ—¶æˆ‘ä»¬å†™çš„ä¸€ä¸ªæ¥å£ä¸­æœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå½“æˆ‘ä»¬å†™è¯¥æ¥å£çš„å®ç°ç±»æ—¶ï¼Œå¿…é¡»å®ç°è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œè¿™æ˜æ˜¾æœ‰æ—¶æ¯”è¾ƒæµªè´¹ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæœ‰æ—¶åªéœ€è¦æŸä¸€äº›ï¼Œæ­¤å¤„ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼Œå€ŸåŠ©äºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥æŠ½è±¡ç±»å®ç°äº†è¯¥æ¥å£ï¼Œå®ç°äº†æ‰€æœ‰çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬ä¸å’ŒåŸå§‹çš„æ¥å£æ‰“äº¤é“ï¼Œåªå’Œè¯¥æŠ½è±¡ç±»å–å¾—è”ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œé‡å†™æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•å°±è¡Œã€‚

```java
public class Demo1 {
    public static void main(String[] args) {
        sub1 sub1 = new sub1();
        sub2 sub2 = new sub2();
        sub2.method2();
        sub1.method1();
    }
}

interface a {
    public void method1();
    public void method2();
}

abstract class As implements a{
    @Override
    public void method1() {}

    @Override
    public void method2() {}
}

class sub1 extends As {
    @Override
    public void method1() {
        System.out.println("æ–¹æ³•1");
    }
}

class sub2 extends As {
    @Override
    public void method2() {
        System.out.println("æ–¹æ³•2");
    }
}
```

#### 7. æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰

æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚

##### åœºæ™¯

å’–å•¡åº—ï¼Œæœ‰ä¸¤ç§å’–å•¡åŠ ç³–æˆ–è€…åŠ å¥¶

```java
interface CoffeeService{
   void buyCoffee();
}

//åŠ ç³–å’–å•¡
class CoffeeSugaring implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("åŠ ç³–");
    }
}

//åŠ å¥¶å’–å•¡
class MilkSugaring implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("åŠ å¥¶");
    }
}
```

ç°åœ¨å‡†å¤‡åŠ ä¸¤ä¸ªå®¹é‡è§„æ ¼çš„å’–å•¡ï¼Œå¤§æ¯å’Œå°æ¯ï¼Œå½“ç„¶ä½ å¯ä»¥å¯¹åº”åŠ å‡ ä¸ªå®ç°ç±»ä¸å°±å¾—äº†ï¼Ÿ

```java
interface CoffeeService{
   void buyCoffee();
}

//åŠ ç³–å’–å•¡
class MaxCoffeeSugaring implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("å¤§æ¯åŠ ç³–");
    }
}

//åŠ ç³–å’–å•¡
class MinCoffeeSugaring implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("å°æ¯åŠ ç³–");
    }
}

//åŠ å¥¶å’–å•¡
class MaxCoffeeMilk implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("å¤§æ¯åŠ å¥¶");
    }
}

//åŠ å¥¶å’–å•¡
class MinCoffeeMilk implements CoffeeService{
    @Override
    public void buyCoffee() {
        System.out.println("å°æ¯åŠ å¥¶");
    }
}
```

å†è¿‡å‡ å¤©ï¼Œä½ ä»¬è¦ä¸Šæ¶è¶…å¤§æ¯å¾ˆä¸­æ¯å­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚è¿™æ—¶å€™ä½ çš„å®ç°ç±»å°†æ˜¯M*Næ‰€æœ‰ç»´åº¦çš„ä¹˜é›†ï¼Œè¿™ä¸ªä½ éœ€è¦ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œè®©ä½ ä»£ç é™ä½è€¦åˆ

##### é‡æ–°è®¾è®¡åä»£ç 

M*N ä¼˜åŒ–åä¸º M+N

```java
public class Demo4 {

    public static void main(String[] args) {
        CoffeeAbstract coffeeAbstract = new Max();
        //åŠ å¥¶
        coffeeAbstract.setCoffeeService(new MilkSugaring());
        coffeeAbstract.draw();
    }
}

//è´­ä¹°å’–å•¡æ¥å£
interface CoffeeService {
    void buyCoffee();
}

class CoffeeSugaring implements CoffeeService {
    @Override
    public void buyCoffee() {
        System.out.println("--åŠ ç³–");
    }
}

public class CoffeeMilk implements CoffeeService {
    @Override
    public void buyCoffee() {
        System.out.println("åŠ å¥¶");
    }
}

//æŠŠåŠ ææ–™çš„æŠ½è±¡å‡ºæ¥
abstract class CoffeeAbstract {
    protected CoffeeService coffeeService;

    public CoffeeService getCoffeeService() {
        return coffeeService;
    }

    public void setCoffeeService(CoffeeService coffeeService) {
        this.coffeeService = coffeeService;
    }
    public abstract void draw();
}


class Max extends CoffeeAbstract {
    @Override
    public void draw() {
        System.out.print("å¤§æ¯");
        coffeeService.buyCoffee();
    }
}

class Min extends CoffeeAbstract {
    @Override
    public void draw() {
        System.out.print("å°æ¯");
        coffeeService.buyCoffee();
    }
}
```

ä½ æƒ³å¢åŠ è¶…å¤§æ¯è·Ÿä¸­æ¯åªéœ€è¦å¢åŠ ä¸¤ä¸ªå®ç°ç±»

```java
class Centre extends CoffeeAbstract {
    @Override
    public void draw() {
        System.out.print("ä¸­æ¯");
        coffeeService.buyCoffee();
    }
}

class Huge extends CoffeeAbstract {
    @Override
    public void draw() {
        System.out.print("è¶…æ¯");
        coffeeService.buyCoffee();
    }
}
```

**æµ‹è¯•**

```java
public class Test {

    public static void main(String[] args) {
        MaxCoffee maxCoffee = new MaxCoffee();
        maxCoffee.setCoffeeService(new CoffeeSugaring());
        maxCoffee.draw();
    }
}
```

**ç¼ºç‚¹ï¼š**

æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚
æ¡¥æ¥æ¨¡å¼è¦æ±‚æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å…·æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚

#### 8. è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰

è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ é€šè¿‡å°†å¯¹è±¡åŒ…è£…åœ¨ä¸€ä¸ªè£…é¥°å™¨ç±»ä¸­æ¥æ‰©å±•å…¶è¡Œä¸ºï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å…¶ä»£ç ã€‚

```java
public class Demo5 {
      public static void main(String[] args) {
        HuaMuLan huaMuLan = new HuaMuLan();
        System.out.println(huaMuLan.getAttack());
        Pifu pifu = new Pifu(huaMuLan);
        System.out.println(pifu.getAttack());
        ZhuangBei zhuangBei = new ZhuangBei(pifu);
        System.out.println(zhuangBei.getAttack());

    }
}

abstract class YingXiong{
    //åŠ æˆæ 
    private String incident;

    //æ”»å‡»åŠ›
    private int attack;

    public abstract int getAttack();

    public abstract String getIncident();

}


//é€‰æ‹©è‹±é›„
class HuaMuLan extends YingXiong{

    @Override
    public int getAttack() {
        return 60;
    }

    @Override
    public String getIncident() {
        return "é€‰æ‹©èŠ±æœ¨å…°\n";
    }
}

//ä¸€å±‚è£…é¥°è€… ä¹°äº†çš®è‚¤
class Pifu extends HuaMuLan{
    private HuaMuLan huaMuLan;

    public Pifu(HuaMuLan huaMuLan) {
        this.huaMuLan = huaMuLan;
    }

    @Override
    public int getAttack() {
        return huaMuLan.getAttack() + 10;
    }

    @Override
    public String getIncident() {
        return huaMuLan.getIncident()  + "è´­ä¹°çš®è‚¤æ°´æ™¶çŒé¾™è€…\n";
    }
}

//äºŒå±‚è£…é¥° ä¹°äº†è£…å¤‡
class ZhuangBei extends HuaMuLan{
    private HuaMuLan huaMuLan;

    public ZhuangBei(HuaMuLan huaMuLan) {
        this.huaMuLan = huaMuLan;
    }

    @Override
    public int getAttack() {
        return huaMuLan.getAttack() + 10;
    }

    @Override
    public String getIncident() {
        return huaMuLan.getIncident()  + "è´­ä¹°é“å‰‘\n";
    }
}
```

##### 9. ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰

ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç°â€œæ•´ä½“/éƒ¨åˆ†â€å±‚æ¬¡ç»“æ„ã€‚

ç¤ºä¾‹ï¼šæ–‡ä»¶å¤¹æµè§ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸åŒç±»å‹çš„æ–‡ä»¶å…¼å®¹åˆ°ä¸€ä¸ªçª—å£

```java
public class Demo2 {
    public static void main(String[] args) {
        Folders zwjj = new Folders("æ€»æ–‡ä»¶å¤¹");
        
        TextFile aText = new TextFile("a.txt");
        ImagerFile bImager = new ImagerFile("b.jpg");
        Folders cFolders = new Folders("Cæ–‡ä»¶å¤¹");
        zwjj.add(aText);
        zwjj.add(bImager);
        zwjj.add(cFolders);

        //å‘Cæ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶ï¼šc.txtã€c.jpg 
        TextFile cText = new TextFile("c.txt");
        ImagerFile cImage = new ImagerFile("c.jpg");
        cFolders.add(cText);
        cFolders.add(cImage);

         //éå†ä¸€çº§æ–‡ä»¶å¤¹
        zwjj.getAll();
        System.out.println("-----------------------");
        //éå†Cæ–‡ä»¶å¤¹
        cFolders.getAll();
    }

}

abstract class File {
    String name;

    public File(String name) {
        this.name = name;
    }

    public abstract void getAll();

    @Override
    public String toString() {
        return "File{" +
                "name='" + name + '\'' +
                '}';
    }
}

//æ–‡ä»¶å¤¹ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶
class Folders extends File {

    List<File> files;

    public Folders(String name) {
        super(name);
        this.files = new ArrayList<>();
        ;
    }

    Boolean add(File file) {
        return files.add(file);
    }

    Boolean del(File file) {
        return files.remove(file);
    }

    @Override
    public void getAll() {
        Iterator<File> iterator = files.iterator();
        while (iterator.hasNext()) {
            System.out.println(iterator.next());
        }
    }
}

class TextFile extends File {

    public TextFile(String name) {
        super(name);
    }

    public void getAll() {
        System.out.println("è¿™æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶åï¼š" + super.name);
    }
}

class ImagerFile extends File {

    public ImagerFile(String name) {
        super(name);
    }

    public void getAll() {
        System.out.println("è¿™æ˜¯å›¾åƒæ–‡ä»¶ï¼Œæ–‡ä»¶åï¼š" + super.name);
    }
}
```

##### 10. å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰

å¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œéšè—äº†ä¸€ä¸ªå¤æ‚çš„å­ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚

```java
public class Demo3 {
    public static void main(String[] args) {
        Service1 service1 = new Service1Impl();
        service1.all();
    }
}

interface Service1{
    void all();
}

class Service1Impl implements Service1{
    @Override
    public void all() {
        a();
        b();
        c();
    }
    void a(){
        System.out.println("æ–¹æ³•A");
    }
    void b(){
        System.out.println("æ–¹æ³•B");
    }
    void c(){
        System.out.println("æ–¹æ³•C");
    }
}
```

##### 11. äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰

Javaä¸­çš„äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯ä»¥åœ¨å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ä¹‹é—´å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œä»è€Œå‡å°‘å†…å­˜çš„ä½¿ç”¨é‡å’Œæé«˜æ€§èƒ½ã€‚

```java
public class Demo2 {
    public static void main(String[] args) {
        ClassFactory classFactory = new ClassFactory();
        a f1 = classFactory.getFlyweight("key1");
        a f2 = classFactory.getFlyweight("key1");
        a f3 = classFactory.getFlyweight("key2");
        System.out.println(f1);
        System.out.println(f2);
        System.out.println(f3);
    }
}

abstract class a {
    abstract void getThisclass();
}

class b extends a {
    String className;

    public b(String className) {
        this.className = className;
    }

    @Override
    void getThisclass() {
        System.out.println("å½“å‰ç±»æ˜¯" + className);
    }
}

class ClassFactory {
    static HashMap<String, a> map = new HashMap();

    a getFlyweight(String key) {
        a a = map.get(key);
        if (null == a) {
            a = new b(key);
            map.put(key, a);
        }
        return a;
    }
}
```

#### 12. ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰

ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹æ¨¡å¼ï¼Œå®ƒä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚

##### é™æ€ä»£ç†

é™æ€ä»£ç†ï¼šç”±ç¨‹åºå‘˜åˆ›å»ºæˆ–ç‰¹å®šå·¥å…·è‡ªåŠ¨ç”Ÿæˆæºä»£ç ï¼Œä¹Ÿå°±æ˜¯**åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å°†æ¥å£ã€è¢«ä»£ç†ç±»ã€ä»£ç†ç±»ç­‰ç¡®å®šä¸‹æ¥**ã€‚åœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œä»£ç†ç±»çš„.classæ–‡ä»¶å°±å·²ç»ç”Ÿæˆã€‚

ç¤ºä¾‹ï¼šæˆ¿ä¸œç§Ÿæˆ¿ï¼Œä½†æ˜¯æˆ¿ä¸œæˆ¿å­å¤ªå¤šï¼Œè‡ªå·±å¤„ç†ä¸è¿‡æ¥ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šé€‰æ‹©æ‰¾ä¸­ä»‹ï¼Œä¸­ä»‹è´Ÿè´£æŠŠæˆ¿å­ç§Ÿå‡ºå»

```java
/**
 * æˆ¿ä¸œæ¥å£
 */
public interface LandlordService {

    /**
     * å‡ºç§Ÿ
     * @param money ç§Ÿé‡‘
     */
    void rent(Integer money);
}
```

```java
/**
 * ç§Ÿå®¢å®ç°ç±»
 */
public class TenantImpl implements LandlordService {

    @Override
    public void rent(Integer money) {
        System.out.println("ç§Ÿä¸‹" + money + "å…ƒä¸€ä¸ªæœˆçš„æˆ¿å­");
    }
}

```

```java
public class IntermediaryImpl implements LandlordService {

    private LandlordService target;

    @Override
    public void rent(Integer money) {
        System.out.println("[é™æ€ä»£ç†]äº¤ä¸­ä»‹è´¹");
        target.rent(money);
        System.out.println("[é™æ€ä»£ç†]ä¸­ä»‹è´Ÿè´£ç»´ä¿®ç®¡ç†");
    }

    public IntermediaryImpl(LandlordService target) {
        this.target = target;
    }
}
```

**æµ‹è¯•**

```java
    /**
     * é€šè¿‡ä»£ç†ç±»ä¸­ä»‹å»ç§Ÿæˆ¿
     * @param args
     */
    public static void main(String[] args) {
        //è¦ç§Ÿæˆ¿çš„æˆ¿å®¢
        TenantImpl tenant = new TenantImpl();
        //é€šè¿‡ä¸­ä»‹å»ç§Ÿæˆ¿
        IntermediaryImpl intermediary = new IntermediaryImpl(tenant);
        intermediary.rent(2000);
    }
```

###### **JDK åŠ¨æ€ä»£ç†**

- å¿…é¡»æœ‰æ¥å£ã€‚
- åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»ä¼šå®ç°ç›®æ ‡å¯¹è±¡çš„æ¥å£ã€‚
- åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ã€‚

è¿˜æ˜¯ç§Ÿæˆ¿çš„é—®é¢˜ï¼Œæˆ‘ä»¬å†è€ƒè™‘ä¸€ç§åœºæ™¯ï¼Œæˆ‘ä»¬æˆ¿å­é™¤äº†ç§Ÿç»™æˆ¿å®¢ï¼Œè¿˜å¯èƒ½ä¼šæœ‰ä¸€äº›è¿è¥çš„æˆ¿ç®¡æˆ–è€…æ˜¯äºŒæˆ¿ä¸œï¼Œå¸®æˆ¿ä¸œå»æ‰“ç†ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¹‹å‰çš„é™æ€ä»£ç†æ˜¯ä¸æ˜¯ä¸èƒ½ç”¨äº†ï¼Ÿæˆ‘ä»¬éœ€è¦å†å»å†™ä¸€ä¸ªä¸­ä»‹ç»™æˆ¿ç®¡æˆ–è€…äºŒæˆ¿ä¸œç­‰ç­‰çš„ä»£ç†ç±»ã€‚

**æ¦‚å¿µ**

- åŠ¨æ€ä»£ç†æ˜¯é€šè¿‡è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»å®ç°çš„ï¼Œä»£ç†ç±»åœ¨ç¼–è¯‘æœŸå¹¶ä¸å­˜åœ¨ã€‚
- å¯ä»¥å®ç°æ‹¦æˆªç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ è‡ªå®šä¹‰é€»è¾‘ã€‚
- javaæœ€å¸¸è§çš„æ–¹å¼æ˜¯jdkä»£ç†è·Ÿcglibä»£ç†
- JDKè‡ªå¸¦ï¼Œç›´æ¥ä¾èµ–`java.lang.reflect`ï¼Œæ— éœ€é¢å¤–å¼•å…¥åº“ã€‚

```java
/**
 * æˆ¿ç®¡å®ç°ç±»
 */
public class StewardImpl implements LandlordService {

    @Override
    public void rent(Integer money) {
        System.out.println("æˆ¿ç®¡å®¶ç§Ÿä¸‹" + money + "å…ƒä¸€ä¸ªæœˆçš„æˆ¿å­");
    }
}
```

```java
/**
	ä»£ç†ç±»
*/
public class RentProxy implements InvocationHandler {

    private Object target; // ä»£ç†çš„ç›®æ ‡å¯¹è±¡

    public RentProxy(Object target) {
        this.target = target;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("ä¸­ä»‹å»ä»£ç†æˆ¿å­");
        //å¦‚æœæ˜¯æˆ¿ç®¡å®¶éœ€è¦æ”¯ä»˜ä»£ç†è´¹
        if (target instanceof StewardImpl) {
            Integer money = (Integer) args[0];
            int fee = (int) (money * 0.1); // 10%çš„ç®¡ç†è´¹
            System.out.println("æˆ¿ç®¡å®¶æŠ½å–ç®¡ç†è´¹ï¼š" + fee + "å…ƒ");
            System.out.println("æˆ¿ä¸œå®é™…åˆ°æ‰‹çš„æˆ¿ç§Ÿ" + (money - fee));
        }
        if (target instanceof TenantImpl) {
            System.out.println("æˆ¿ä¸œå®é™…åˆ°æ‰‹çš„æˆ¿ç§Ÿ" + args[0]);
        }
        return method.invoke(target, args);
    }
}
```

```java
public class Test {

    public static void main(String[] args) {
        // ç§Ÿå®¢çš„åœºæ™¯
        LandlordService tenant = new TenantImpl();
        LandlordService tenantProxy = (LandlordService) Proxy.newProxyInstance(
                tenant.getClass().getClassLoader(),
                tenant.getClass().getInterfaces(),
                new RentProxy(tenant)
        );
        tenantProxy.rent(3000);

        //æˆ¿ç®¡å®¶ æˆ–è€…äºŒæˆ¿ä¸œçš„åœºæ™¯
        LandlordService steward = new StewardImpl();
        LandlordService stewardProxy = (LandlordService) Proxy.newProxyInstance(
                steward.getClass().getClassLoader(),
                steward.getClass().getInterfaces(),
                new RentProxy(steward)
        );
        stewardProxy.rent(3000);
    }
}
```

**CGLIB åŠ¨æ€ä»£ç†**

- ä¸éœ€è¦æ¥å£ã€‚
- é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»æ¥ç”Ÿæˆä»£ç†ç±»ã€‚
- å¯ä»¥ä»£ç†æ™®é€šç±»å’Œæ¥å£ï¼Œä½†å¦‚æœç›®æ ‡ç±»æ˜¯ `final` æˆ–ç›®æ ‡æ–¹æ³•æ˜¯ `final`ï¼Œåˆ™æ— æ³•ä»£ç†ï¼ˆå› ä¸ºæ— æ³•ç»§æ‰¿å’Œè¦†ç›–ï¼‰ã€‚

```java
/**
 * æˆ¿ç®¡å®ç°ç±»  ä¸éœ€è¦å»å®ç°æ¥å£äº†
 */
public class Steward2Impl {

    public void rent(Integer money) {
        System.out.println("æˆ¿ç®¡å®¶ç§Ÿä¸‹" + money + "å…ƒä¸€ä¸ªæœˆçš„æˆ¿å­");
    }
}
```

```java
public class RentProxy implements MethodInterceptor {
    private Object target;

    public RentProxy(Object target) {
        this.target = target;
    }

    @Override
    public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {
        // åˆ¤æ–­æ˜¯æˆ¿ç®¡å®¶ä»£ç†é€»è¾‘
        if (target instanceof Steward2Impl) {
            Integer money = (Integer) args[0];
            int fee = (int) (money * 0.1); // 10%çš„ç®¡ç†è´¹
            System.out.println("æˆ¿ç®¡å®¶æŠ½å–ç®¡ç†è´¹ï¼š" + fee + "å…ƒ");
            args[0] = money - fee; // ä¿®æ”¹ç§Ÿé‡‘
        }

        // è°ƒç”¨ç›®æ ‡æ–¹æ³•
        Object result = proxy.invoke(target, args);

        // åç½®é€»è¾‘
        System.out.println("ä»£ç†é€»è¾‘ï¼šç§Ÿèµå®Œæˆ");
        return result;
    }

    public Object createProxy() {
        Enhancer enhancer = new Enhancer();
        enhancer.setSuperclass(target.getClass()); // è®¾ç½®ç›®æ ‡ç±»ä¸ºçˆ¶ç±»
        enhancer.setCallback(this); // è®¾ç½®å›è°ƒæ–¹æ³•
        return enhancer.create(); // åˆ›å»ºä»£ç†å¯¹è±¡
    }
}
```

```java
public class Test {

    public static void main(String[] args) {
        Steward2Impl landlord = new Steward2Impl();

        // åˆ›å»ºä»£ç†å¯¹è±¡
        RentProxy proxy = new RentProxy(landlord);
        Steward2Impl proxyLandlord = (Steward2Impl) proxy.createProxy();  // ç›´æ¥åˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†ï¼Œä¸éœ€è¦æ¥å£

        // è°ƒç”¨ä»£ç†æ–¹æ³•
        proxyLandlord.rent(5000);
    }
}

```

jdk17-cglib**åšåŠ¨æ€ä»£ç†å¼‚å¸¸**

å½“å‰ç‰ˆæœ¬çš„jdkçš„åå°„ç›¸å…³åŠŸèƒ½è¢«é™åˆ¶ï¼Œå¯¼è‡´äº†å¼‚å¸¸

```java
--add-opens java.base/java.lang=ALL-UNNAMED
--add-opens java.base/sun.net.util=ALL-UNNAMED
```

![image-20241126095157512](./23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20241126095157512.png)

#### è¡Œä¸ºå‹æ¨¡å¼

##### 13. è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰

è´£ä»»é“¾æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†é“¾è¿›è¡Œä¼ é€’ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†ä¸ºæ­¢ã€‚

##### è´£ä»»é“¾æ¨¡å¼çš„ç‰¹ç‚¹ï¼š

1. **è¯·æ±‚è§£è€¦**ï¼šè¯·æ±‚çš„å‘é€è€…ä¸éœ€è¦æŒ‡å®šå…·ä½“çš„æ¥æ”¶è€…ï¼Œæ¥æ”¶è€…åŠ¨æ€åœ°å¤„ç†è¯·æ±‚ã€‚
2. **çµæ´»æ€§**ï¼šå¯ä»¥åŠ¨æ€åœ°æ›´æ”¹é“¾ä¸­çš„æˆå‘˜ï¼Œå¢åŠ æˆ–åˆ é™¤è´£ä»»å¯¹è±¡ã€‚
3. **å»¶è¿Ÿå¤„ç†**ï¼šè¯·æ±‚æ²¿é“¾ä¼ é€’ï¼Œç›´åˆ°æŸä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ã€‚

------

##### **è´£ä»»é“¾æ¨¡å¼çš„ç»“æ„**

1. **æŠ½è±¡å¤„ç†è€…ï¼ˆHandlerï¼‰**ï¼š å®šä¹‰ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼ŒåŒ…å«å¤„ç†è¯·æ±‚çš„æ–¹æ³•å’Œè®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†è€…çš„æ–¹æ³•ã€‚
2. **å…·ä½“å¤„ç†è€…ï¼ˆConcreteHandlerï¼‰**ï¼š å®ç°æŠ½è±¡å¤„ç†è€…ï¼Œå¤„ç†è¯·æ±‚æˆ–å°†å…¶è½¬å‘ç»™ä¸‹ä¸€ä¸ªå¤„ç†è€…ã€‚
3. **å®¢æˆ·ç«¯ï¼ˆClientï¼‰**ï¼š å‘å‡ºè¯·æ±‚å¹¶å°†å…¶ä¼ é€’ç»™é“¾çš„èµ·å§‹å¤„ç†è€…ã€‚

**ç¤ºä¾‹åœºæ™¯ï¼šå‘˜å·¥çš„æŠ¥é”€ç”³è¯·éœ€è¦é€çº§å®¡æ‰¹ï¼Œç›´åˆ°æ»¡è¶³æƒé™è¦æ±‚ã€‚**

###### æŠ½è±¡å¤„ç†è€…

```java
/**
 * æŠ½è±¡å¤„ç†è€…  ç”¨äºå¤„ç†å®¡æ‰¹çš„è¯·æ±‚
 */
public abstract class Handler {

    protected Handler nextHandler;

    public void setNextHandler(Handler nextHandler) {
        this.nextHandler = nextHandler;
    }

    public abstract void handleRequest(int amount);
}
```

###### å…·ä½“å¤„ç†è€…

```java
// å…·ä½“å¤„ç†è€…1ï¼šç»ç†
public class Manager extends Handler {

    @Override
    public void handleRequest(int amount) {
        if (amount <= 1000) {
            System.out.println("ç»ç†å®¡æ‰¹é€šè¿‡é‡‘é¢: " + amount + " å…ƒ");
        } else if (nextHandler != null) {
            nextHandler.handleRequest(amount);
        }
    }
}
```

```java
// å…·ä½“å¤„ç†è€…2ï¼šæ€»ç›‘
public class Director extends Handler {
    @Override
    public void handleRequest(int amount) {
        if (amount <= 5000) {
            System.out.println("æ€»ç›‘å®¡æ‰¹é€šè¿‡é‡‘é¢: " + amount + " å…ƒ");
        } else if (nextHandler != null) {
            nextHandler.handleRequest(amount);
        }
    }
}
```

```java
public class VicePresident extends Handler {
    @Override
    public void handleRequest(int amount) {
        if (amount <= 10000) {
            System.out.println("å‰¯æ€»è£å®¡æ‰¹é€šè¿‡é‡‘é¢: " + amount + " å…ƒ");
        } else if (nextHandler != null) {
            nextHandler.handleRequest(amount);
        }
    }
}
```

###### å®¢æˆ·ç«¯æµ‹è¯•

```java
public class Test  {
    public static void main(String[] args) {
        // æ‹Ÿå®šä¸‰çº§å¤„ç†äºº   ç»ç†å¤„ç†1000å†…çš„å®¡æ‰¹ å¤§äº1000äº¤ç»™ä¸‹ä¸€çº§ æ€»ç›‘5000å†….......
        Handler manager = new Manager();
        Handler director = new Director();
        Handler vicePresident = new VicePresident();

        manager.setNextHandler(director);
        director.setNextHandler(vicePresident);

        int[] requests = {500, 2000, 7000, 15000};
        for (int amount : requests) {
            System.out.println("è¯·æ±‚é‡‘é¢: " + amount + " å…ƒ");
            manager.handleRequest(amount);
        }
    }
}
```

##### 14. å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰

å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼Œä»è€Œå…è®¸ä½ ä½¿ç”¨ä¸åŒçš„è¯·æ±‚ã€é˜Ÿåˆ—æˆ–æ—¥å¿—æ¥å‚æ•°åŒ–å®¢æˆ·ç«¯è¯·æ±‚ã€‚

###### æ¥å£ç±»

```java
/**
 * å¼€å…³æ¥å£
 */
public interface Switch {

    void off();

    void on();
}
```
###### å‘½ä»¤æ¥æ”¶è€…

```java
/**
 * ç”µè§†ç±» æœ‰å¼€å…³çš„æ–¹æ³•
 */
public class TV {

    public void open(){
        System.out.println("æ‰“å¼€ç”µè§†æœº");
    }

    public void close(){
        System.out.println("ç”µè§†æœºå…³é—­");
    }
}

```

```java
/**
 * ç”µè§†æœºå¼€å…³çš„å®ç°ç±»
 */
public class TVSwitchImpl implements Switch {

    private TV tv;

    public TVSwitchImpl(TV tv) {
        this.tv = tv;
    }

    @Override
    public void off() {
        tv.close();
    }

    @Override
    public void on() {
        tv.open();
    }
}
```

```java
/**
 * é¥æ§å™¨  ä¹Ÿå°±æ˜¯è°ƒç”¨è€…
 */
public class RemoteControl {

    private Switch sw;

    public RemoteControl(Switch sw) {
        this.sw = sw;
    }

    void openTV() {
        System.out.println("æ¥æ”¶åˆ°ä¸»äººçš„æ‰“å¼€è¯·æ±‚");
        sw.on();
    }

    void closeTV() {
        System.out.println("æ¥æ”¶åˆ°ä¸»äººçš„æ‰“å¼€è¯·æ±‚");
        sw.off();
    }
}
```

```java
public class Test {

    public static void main(String[] args) {
        //ç”µè§†  å‘½ä»¤æ¥æ”¶è€…
        TV tv = new TV();
        // å‘½ä»¤çš„å®ç°
        Switch sw = new TVSwitchImpl(tv);
        // é¥æ§å™¨  ä¹Ÿå°±æ˜¯è°ƒç”¨è€…
        RemoteControl remoteControl = new RemoteControl(sw);
        remoteControl.closeTV();
        remoteControl.openTV();
    }
}
```

##### 15. è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰

è§£é‡Šå™¨æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§è¯­è¨€ï¼Œç„¶åé€šè¿‡è¯¥è¯­è¨€æ¥è§£é‡Šè¡¨è¾¾å¼ã€‚

éå¸¸å¤æ‚  ğŸ‘æ²¡ç”¨ä¸”

##### 16. è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰

è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸æš´éœ²é›†åˆåº•å±‚è¡¨ç¤ºçš„æƒ…å†µä¸‹éå†é›†åˆã€‚

```java
public class Demo {

    // å®¢æˆ·ç«¯
    public class IteratorPatternDemo {
        public static void main(String[] args) {
            // åˆ›å»ºä¸€ä¸ªé›†åˆ
            Integer[] numbers = {1, 2, 3, 4, 5};
            NumberCollection collection = new NumberCollection(numbers);

            // è·å–è¿­ä»£å™¨
            Iterator<Integer> iterator = collection.createIterator();

            // éå†é›†åˆ
            while (iterator.hasNext()) {
                System.out.println("å½“å‰å…ƒç´ : " + iterator.next());
            }
        }
    }
}

// è¿­ä»£å™¨æ¥å£
interface Iterator<T> {
    boolean hasNext();  // æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ 

    T next();           // è·å–ä¸‹ä¸€ä¸ªå…ƒç´ 
}

// èšåˆæ¥å£
interface Aggregate<T> {
    Iterator<T> createIterator(); // åˆ›å»ºè¿­ä»£å™¨
}

// å…·ä½“èšåˆç±»ï¼šæ•°å­—é›†åˆ
class NumberCollection implements Aggregate<Integer> {
    private final Integer[] numbers;

    public NumberCollection(Integer[] numbers) {
        this.numbers = numbers;
    }

    @Override
    public Iterator<Integer> createIterator() {
        return new NumberIterator(numbers);
    }
}

// å…·ä½“è¿­ä»£å™¨ç±»
class NumberIterator implements Iterator<Integer> {
    private final Integer[] numbers;
    private int position = 0;

    public NumberIterator(Integer[] numbers) {
        this.numbers = numbers;
    }

    @Override
    public boolean hasNext() {
        return position < numbers.length;
    }

    @Override
    public Integer next() {
        if (hasNext()) {
            return numbers[position++];
        }
        throw new RuntimeException("æ²¡æœ‰æ›´å¤šå…ƒç´ ");
    }
}
```

##### 17. ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰

ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å‡å°‘å¯¹è±¡ä¹‹é—´çš„ç›´æ¥è€¦åˆï¼Œé€šè¿‡å°†å®ƒä»¬çš„é€šä¿¡å§”æ‰˜ç»™ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡æ¥å®ç°ã€‚

```java
package com.guo.mediator;



// å®¢æˆ·ç«¯
public class MediatorPatternSimple {
    public static void main(String[] args) {
        Mediator controlTower = new ControlTower();

        Flight flight1 = new Flight(controlTower, "èˆªç­A");
        Flight flight2 = new Flight(controlTower, "èˆªç­B");

        flight1.requestLanding(); // èˆªç­A è¯·æ±‚é™è½
        flight2.requestLanding(); // èˆªç­B è¯·æ±‚é™è½ï¼ˆç­‰å¾…è·‘é“ç©ºé—²ï¼‰

        flight1.freeRunway(); // èˆªç­A é‡Šæ”¾è·‘é“
        flight2.requestLanding(); // èˆªç­B ç°åœ¨å¯ä»¥é™è½
    }
}




// ä¸­ä»‹è€…æ¥å£
interface Mediator {
    void notify(String event, Flight flight); // é€šçŸ¥ä¸­ä»‹è€…äº‹ä»¶
}

// å…·ä½“ä¸­ä»‹è€…ï¼šæ§åˆ¶å¡”
class ControlTower implements Mediator {
    private boolean runwayAvailable = true; // è·‘é“æ˜¯å¦å¯ç”¨

    @Override
    public void notify(String event, Flight flight) {
        if ("requestLanding".equals(event)) {
            if (runwayAvailable) {
                System.out.println("æ§åˆ¶å¡”ï¼šå…è®¸ " + flight.getName() + " é™è½");
                runwayAvailable = false;
            } else {
                System.out.println("æ§åˆ¶å¡”ï¼šè·‘é“è¢«å ç”¨ï¼Œè¯·ç­‰å¾…ï¼");
            }
        } else if ("freeRunway".equals(event)) {
            System.out.println("æ§åˆ¶å¡”ï¼šè·‘é“å·²ç©ºé—²");
            runwayAvailable = true;
        }
    }
}

// åŒäº‹ç±»ï¼šèˆªç­
class Flight {
    private Mediator mediator;
    private String name;

    public Flight(Mediator mediator, String name) {
        this.mediator = mediator;
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void requestLanding() {
        System.out.println(name + " è¯·æ±‚é™è½");
        mediator.notify("requestLanding", this);
    }

    public void freeRunway() {
        System.out.println(name + " å·²å®Œæˆé™è½ï¼Œé‡Šæ”¾è·‘é“");
        mediator.notify("freeRunway", this);
    }
}
```

##### 18. å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰

å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸æš´éœ²å¯¹è±¡å®ç°ç»†èŠ‚çš„æƒ…å†µä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡çš„çŠ¶æ€ã€‚

##### 19. è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å®šä¹‰ä¸€ç§è®¢é˜…æœºåˆ¶ï¼Œä»¥ä¾¿ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥ä¸€ç»„å¯¹è±¡ã€‚

##### 20. çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰

çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ”¹å˜å…¶è¡Œä¸ºã€‚

##### 21. ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰

ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œç„¶åå°†å®ƒä»¬å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©ç®—æ³•ã€‚

##### 22. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰

æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå¹¶å…è®¸å­ç±»ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤æä¾›å®ç°ã€‚

##### 23. è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰

è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†æ“ä½œä»å…ƒç´ çš„ç±»ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå°†å®ƒä»¬å°è£…åœ¨ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ã€‚

